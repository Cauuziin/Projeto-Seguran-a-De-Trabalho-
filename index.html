<!doctype html>
<html lang="pt-BR">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Ponto Seguro â€” Painel Digital</title>

    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Leaflet CSS e JS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>

    <style>
        .conteudo {
            display: none;
            opacity: 0;
            transition: opacity 0.4s ease;
        }
        
        .conteudo.ativo {
            display: block;
            opacity: 1;
        }
        
        nav a.ativo {
            color: #38bdf8;
            font-weight: bold;
            text-decoration: underline;
        }
        
        #map {
            height: 400px;
            border-radius: 10px;
        }
    </style>
</head>

<body>
    <header>
        <h1 class="logo">ğŸ›¡ Ponto Seguro</h1>
        <nav>
            <ul>
                <li><a href="#" data-section="inicio" class="ativo">InÃ­cio</a></li>
                <li><a href="#" data-section="mapa">Mapa</a></li>
                <li><a href="#" data-section="estatisticas">EstatÃ­sticas</a></li>
                <li><a href="#" data-section="anunciantes">Anunciantes</a></li>
                <li><a href="#" data-section="sobre">Sobre</a></li>
            </ul>
        </nav>
    </header>

    <main id="conteudo" class="container">
        <!-- INÃCIO -->
        <section id="inicio" class="conteudo ativo">
            <h2>ğŸ›¡ Bem-vindo ao Ponto Seguro</h2>
            <p>
                O <strong>Ponto Seguro</strong> Ã© uma plataforma inovadora que integra
                <strong>tecnologia, seguranÃ§a pÃºblica</strong> e <strong>comunicaÃ§Ã£o urbana</strong>.
            </p>

            <p>
                Nosso sistema conecta painÃ©is digitais em locais estratÃ©gicos da cidade, oferecendo informaÃ§Ãµes em tempo real, estatÃ­sticas de seguranÃ§a e oportunidades para anunciantes.
            </p>

            <div class="cards">
                <div class="card">
                    <h3>ğŸ“ Mapa Interativo</h3>
                    <p>Visualize pontos de monitoramento e status de seguranÃ§a em tempo real.</p>
                </div>
                <div class="card">
                    <h3>ğŸ“Š EstatÃ­sticas</h3>
                    <p>Acompanhe dados de ocorrÃªncias e alertas registrados em diferentes regiÃµes.</p>
                </div>
                <div class="card">
                    <h3>ğŸ“¢ AnÃºncios Inteligentes</h3>
                    <p>EspaÃ§o para empresas se conectarem com o pÃºblico de forma moderna e dinÃ¢mica.</p>
                </div>
                <div class="card">
                    <h3>ğŸ¤ Parcerias</h3>
                    <p>Trabalhamos junto com Ã³rgÃ£os pÃºblicos e empresas privadas para tornar a cidade mais segura.</p>
                </div>
            </div>

            <div class="alerta-nivel verde">
                âœ… Sistema Operando Normalmente â€” Nenhum alerta ativo no momento.
            </div>

            <div class="clima-box">
                <h3>ğŸŒ¤ Clima Atual em Fortaleza</h3>
                <p id="climaStatus">Carregando clima...</p>
            </div>

            <div class="contatos">
                <h3>ğŸ“ Contatos de EmergÃªncia</h3>
                <ul>
                    <li>ğŸš” <strong>PolÃ­cia Militar:</strong> 190</li>
                    <li>ğŸš“ <strong>PolÃ­cia Civil:</strong> 197</li>
                    <li>ğŸš‘ <strong>SAMU:</strong> 192</li>
                    <li>ğŸš’ <strong>Bombeiros:</strong> 193</li>
                    <li>ğŸŒŠ <strong>Defesa Civil:</strong> 199</li>
                    <li>ğŸš¨ <strong>Disque DenÃºncia:</strong> 181</li>
                    <li>ğŸ’Š <strong>CVV (Ajuda Emocional):</strong> 188</li>
                </ul>
            </div>

            <div class="status-geral">
                <p><strong>Ãšltima atualizaÃ§Ã£o:</strong> <span id="dataAtual"></span></p>
                <p><strong>LocalizaÃ§Ã£o:</strong> Fortaleza, CE</p>
            </div>

            <div class="acoes">
                <a href="#" data-section="estatisticas" class="botao-acao">ğŸ“ˆ Ver EstatÃ­sticas ao Vivo</a>
            </div>
        </section>

        <!-- MAPA -->
        <section id="mapa" class="conteudo">
            <h2>ğŸ—º Mapa em Tempo Real</h2>
            <div id="map"></div>
        </section>


        <!-- ESTATÃSTICAS -->
        <section id="estatisticas" class="conteudo">
            <h2>ğŸ“Š EstatÃ­sticas de SeguranÃ§a</h2>
            <canvas id="grafico1" width="400" height="200"></canvas>
        </section>

        <!-- ANUNCIANTES -->
        <section id="anunciantes" class="conteudo">
            <h2>ğŸ’¼ EspaÃ§o para Anunciantes</h2>
            <div style="display:flex;gap:20px;flex-wrap:wrap;justify-content:center;margin-bottom:16px;">
                <img src="https://images.unsplash.com/photo-1521737852567-6949f3f9f2b5?auto=format&fit=crop&w=600&q=80" alt="Parceria entre governo e polÃ­cia" style="flex:1 1 300px;max-width:400px;border-radius:10px;display:block;object-fit:cover;">
                <img src="painel-ponto-seguro.jpg.png" alt="Painel Digital Ponto Seguro" style="flex:1 1 300px;max-width:400px;border-radius:10px;display:block;object-fit:cover;">
            </div>
            <p>
                Este projeto Ã© uma <strong>parceria pÃºblico-privada</strong> entre empresas e o governo, contando com uma equipe especializada que monitora as cÃ¢meras em tempo real. Caso seja detectada alguma situaÃ§Ã£o suspeita ou perigosa, a equipe pode acionar imediatamente a polÃ­cia ou Ã³rgÃ£os de seguranÃ§a.
            </p>
            <p>
                Empresas podem exibir campanhas e anÃºncios nos painÃ©is digitais, contribuindo para a seguranÃ§a urbana e o bem-estar da populaÃ§Ã£o.
            </p>
            <div class="anuncio">
                <img src="anuncio1.png" class="ativo">
                <img src="anuncio2.png">
                <img src="anuncio3.png">
            </div>
        </section>

        <!-- SOBRE -->
        <section id="sobre" class="conteudo">
            <h2>â„¹ Sobre o Projeto</h2>
            <p>O <strong>Ponto Seguro</strong> Ã© um sistema de painÃ©is digitais urbanos com botÃµes de alerta e integraÃ§Ã£o com serviÃ§os de seguranÃ§a.</p>
            <div class="equipe">
                <div class="membro">
                    <h4>CauÃ£ Sousa</h4>
                    <p>Desenvolvedor e idealizador do projeto.</p>
                    <div style="margin-top:18px;">
                        <strong>Participantes:</strong>
                        <ul style="list-style:none;padding:0;margin:8px 0 0 0;">
                            <li>ANA VICTORIA</li>
                            <li>ARTHUR ROSARIO</li>
                            <li>BEATRIZ TAINAN</li>
                            <li>ESTELA SANTOS</li>
                            <li>EVELYN VICTÃ“RIA</li>
                            <li>FRANCIELE SOUZA</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p id="relogio">ğŸ•’ Atualizando hora...</p>
        <p id="statusConexao" class="status">ğŸŸ¢ Conectado</p>
    </footer>

    <script>
        // --- MENU INTERATIVO ---
        const links = document.querySelectorAll("nav a");
        const secoes = document.querySelectorAll("main section");

        links.forEach(link => {
            link.addEventListener("click", e => {
                e.preventDefault();
                const alvo = link.getAttribute("data-section");
                links.forEach(l => l.classList.remove("ativo"));
                secoes.forEach(sec => sec.classList.remove("ativo"));
                link.classList.add("ativo");
                document.getElementById(alvo).classList.add("ativo");
                // Inicializa o mapa se for a aba 'Mapa'
                if (alvo === "mapa") {
                    setTimeout(inicializarMapaLeaflet, 100);
                }
            });
        });

        // --- RELÃ“GIO ---
        function atualizarHora() {
            const agora = new Date();
            document.getElementById("relogio").textContent = "ğŸ•’ " + agora.toLocaleTimeString("pt-BR");
        }
        setInterval(atualizarHora, 1000);
        atualizarHora();

        // --- STATUS CONEXÃƒO ---
        window.addEventListener("offline", () => {
            document.getElementById("statusConexao").textContent = "ğŸ”´ Sem conexÃ£o";
        });
        window.addEventListener("online", () => {
            document.getElementById("statusConexao").textContent = "ğŸŸ¢ Conectado";
        });

        // --- GRÃFICO ---
        const ctx = document.getElementById('grafico1');
        if (ctx) {
            // Mesmos dados dos pontos do mapa
            const totalVerde = 5; // pontosSeguros
            const totalVermelho = 6; // pontosPerigosos
            const total = totalVerde + totalVermelho;
            const percVerde = Math.round((totalVerde / total) * 100);
            const percVermelho = Math.round((totalVermelho / total) * 100);
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: [
                        `Pontos seguros (${percVerde}%)`,
                        `Pontos perigosos (${percVermelho}%)`
                    ],
                    datasets: [{
                        data: [totalVerde, totalVermelho],
                        backgroundColor: [
                            '#22c55e', // verde
                            '#ef4444'  // vermelho
                        ]
                    }]
                },
                options: {
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        // --- DATA ATUAL ---
        const data = new Date();
        document.getElementById("dataAtual").textContent = data.toLocaleDateString("pt-BR", {
            weekday: "long",
            day: "2-digit",
            month: "long",
            year: "numeric"
        });

        // --- CLIMA ---
        async function carregarClima() {
            const climaStatus = document.getElementById("climaStatus");
            try {
                const r = await fetch("https://api.open-meteo.com/v1/forecast?latitude=-3.71722&longitude=-38.5433&current=temperature_2m,weathercode");
                const j = await r.json();
                const temp = j.current.temperature_2m;
                const cod = j.current.weathercode;
                const desc = {
                    0: "CÃ©u limpo â˜€",
                    1: "Parcialmente nublado ğŸŒ¤",
                    2: "Nublado â˜",
                    3: "Encoberto â˜",
                    45: "Nevoeiro ğŸŒ«",
                    61: "Chuva leve ğŸŒ§",
                    80: "Pancadas de chuva â›ˆ"
                }[cod] || "Tempo indefinido";
                climaStatus.textContent = `${desc} â€” ${temp}Â°C`;
            } catch {
                climaStatus.textContent = "NÃ£o foi possÃ­vel carregar o clima ğŸ˜•";
            }
        }
        carregarClima();

        // --- MAPA ---
        // Inicializa o mapa Leaflet apenas quando a aba 'Mapa' for ativada
        let mapaLeaflet = null;
        function inicializarMapaLeaflet() {
            const mapDiv = document.getElementById('map');
            if (!mapDiv) return;
            mapDiv.innerHTML = "";
            mapaLeaflet = L.map('map').setView([-14.2350, -51.9253], 4);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: 'Â© OpenStreetMap contributors'
            }).addTo(mapaLeaflet);
            // Ãcones personalizados
            const iconeVerde = L.icon({
                iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-green.png',
                shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',
                iconSize: [25, 41],
                iconAnchor: [12, 41],
                popupAnchor: [1, -34],
                shadowSize: [41, 41]
            });
            const iconeVermelho = L.icon({
                iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png',
                shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',
                iconSize: [25, 41],
                iconAnchor: [12, 41],
                popupAnchor: [1, -34],
                shadowSize: [41, 41]
            });
            // Pontos seguros (verdes)
            const pontosSeguros = [
                { nome: "BrasÃ­lia", lat: -15.7939, lon: -47.8828 },
                { nome: "Curitiba", lat: -25.4284, lon: -49.2733 },
                { nome: "Porto Alegre", lat: -30.0346, lon: -51.2177 },
                { nome: "Belo Horizonte", lat: -19.9167, lon: -43.9345 },
                { nome: "Salvador", lat: -12.9777, lon: -38.5016 }
            ];
            pontosSeguros.forEach(p => {
                L.marker([p.lat, p.lon], { icon: iconeVerde }).addTo(mapaLeaflet)
                    .bindPopup(`<strong>${p.nome}</strong><br>ğŸŸ¢ Ponto seguro.`);
            });
            // Pontos perigosos para mulheres (vermelhos)
            const pontosPerigosos = [
                { nome: "Fortaleza", lat: -3.7305, lon: -38.5218 },
                { nome: "SÃ£o Paulo", lat: -23.5505, lon: -46.6333 },
                { nome: "Rio de Janeiro", lat: -22.9068, lon: -43.1729 },
                { nome: "Manaus", lat: -3.1190, lon: -60.0217 },
                { nome: "BelÃ©m", lat: -1.4558, lon: -48.4902 },
                { nome: "Recife", lat: -8.0476, lon: -34.8770 }
            ];
            // Bairros com bons pontos de Ã´nibus, mas nÃ£o recomendados para mulheres
            const bairrosNaoRecomendados = [
                { nome: "Copacabana (RJ)", lat: -22.9711, lon: -43.1822 },
                { nome: "Centro (SP)", lat: -23.5452, lon: -46.6337 },
                { nome: "Praia de Iracema (Fortaleza)", lat: -3.7184, lon: -38.5172 },
                { nome: "Savassi (BH)", lat: -19.9387, lon: -43.9332 },
                { nome: "Boa Viagem (Recife)", lat: -8.1177, lon: -34.8941 }
            ];
            bairrosNaoRecomendados.forEach(b => {
                L.marker([b.lat, b.lon], { icon: iconeVermelho }).addTo(mapaLeaflet)
                    .bindPopup(`<strong>${b.nome}</strong><br>ğŸ”´ Bons pontos de Ã´nibus, mas nÃ£o sÃ£o a melhor escolha para mulheres.`);
            });
            pontosPerigosos.forEach(p => {
                L.marker([p.lat, p.lon], { icon: iconeVermelho }).addTo(mapaLeaflet)
                    .bindPopup(`<strong>${p.nome}</strong><br>ï¿½ Ponto perigoso para mulheres.`);
            });
            setTimeout(() => { mapaLeaflet.invalidateSize(); }, 200);
        }

        document.querySelector('[data-section="mapa"]').addEventListener('click', () => {
            // Removido: jÃ¡ existe inicializaÃ§Ã£o no menu interativo acima
        });
    </script>
</body>

</html>
